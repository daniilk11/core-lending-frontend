"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1976],{25854:function(e,t,a){var n=a(57437);a(2265),t.Z=e=>{let{contentName:t}=e;return(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-purple-800 mb-4",children:["Failed to load ",t]}),(0,n.jsx)("p",{className:"text-xl text-purple-600",children:"Please try again later"})]})}},3034:function(e,t,a){var n=a(57437);a(2265),t.Z=()=>{let e="/core-lending-frontend";return(0,n.jsx)("footer",{className:"bg-purple-100 p-8",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold mb-2 text-purple-800",children:"Ultra"}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"".concat(e,"/dashboard"),className:"text-purple-700 hover:text-purple-900 transition-colors",children:"Dashboard"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"".concat(e,"/markets"),className:"text-purple-700 hover:text-purple-900 transition-colors",children:"Markets"})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold mb-2 text-purple-800",children:"Help"}),(0,n.jsxs)("ul",{className:"space-y-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"".concat(e,"/user-docs"),className:"text-purple-700 hover:text-purple-900 transition-colors",children:"User Docs"})}),(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"".concat(e,"/faq"),className:"text-purple-700 hover:text-purple-900 transition-colors",children:"FAQ"})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-bold mb-2 text-purple-800",children:"Community"}),(0,n.jsx)("ul",{className:"space-y-2",children:(0,n.jsx)("li",{children:(0,n.jsx)("a",{href:"https://github.com/daniilk11/core-lending-frontend/tree/main",className:"text-purple-700 hover:text-purple-900 transition-colors",children:"Github"})})})]})]})})}},87803:function(e,t,a){a.d(t,{default:function(){return p}});var n=a(57437),s=a(2265),r=a(27648),l=a(67872),i=()=>(0,n.jsx)("div",{children:(0,n.jsx)(l.NL,{label:"Connect wallet",locale:"en-US"})}),o=a(26298),u=a(48614),d=a(31930);function c(){let[e,t]=(0,s.useState)(!1),[a,r]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{t((0,d.RI)()),r(!0)},[]),a)?(0,n.jsxs)("button",{onClick:()=>(0,d.PY)(!e),className:"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors flex items-center gap-2 bg-white hover:bg-blue-50 border border-gray-200 text-gray-900 shadow-[0_4px_12px_rgba(0,0,0,0.1)]",title:e?"Disable Test Mode":"Enable Test Mode",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e?"bg-blue-500":"bg-gray-400")}),e?"Disable Test Mode":"Enable Test Mode"]}):null}var p=()=>{let e="/core-lending-frontend",[t,a]=(0,s.useState)(!1);return(0,n.jsxs)("header",{className:"sticky top-0 z-50 backdrop-blur-md bg-purple-100/80 border-b border-purple-200",children:[(0,n.jsxs)("nav",{className:"flex justify-between container mx-auto p-6",children:[(0,n.jsxs)("div",{className:"flex gap-8 items-center",children:[(0,n.jsx)(o.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center",children:(0,n.jsx)(r.default,{href:"".concat(e,"/"),className:"text-3xl pb-1 font-bold bg-gradient-to-r from-purple-800 to-purple-600 bg-clip-text text-transparent",children:"Core"})}),(0,n.jsx)(o.E.button,{className:"lg:hidden p-2 rounded-lg hover:bg-purple-200/50",onClick:()=>a(!t),"aria-label":"Toggle menu",whileTap:{scale:.9},children:(0,n.jsx)("svg",{className:"w-6 h-6 text-purple-800",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:t?(0,n.jsx)("path",{d:"M6 18L18 6M6 6l12 12"}):(0,n.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})}),(0,n.jsx)("div",{className:"hidden lg:flex gap-8 items-center",children:["Markets","Dashboard"].map(t=>(0,n.jsx)(o.E.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,n.jsxs)(r.default,{href:"".concat(e,"/").concat(t.toLowerCase()),className:"text-xl text-purple-800 hover:text-purple-600 transition-colors duration-200 relative group",children:[t,(0,n.jsx)("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-purple-600 transition-all duration-300 group-hover:w-full"})]})},t))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)(c,{}),(0,n.jsx)(i,{})]})]}),(0,n.jsx)(u.M,{children:t&&(0,n.jsx)(o.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"lg:hidden absolute left-0 right-0 backdrop-blur-lg bg-purple-100/95 shadow-lg border-b border-purple-200",children:(0,n.jsx)(o.E.div,{className:"container mx-auto px-6 py-4 flex flex-col gap-4",variants:{open:{transition:{staggerChildren:.1}},closed:{transition:{staggerChildren:.05}}},initial:"closed",animate:"open",children:["Markets","Dashboard"].map(t=>(0,n.jsx)(o.E.div,{variants:{open:{x:0,opacity:1},closed:{x:-20,opacity:0}},children:(0,n.jsx)(r.default,{href:"".concat(e,"/").concat(t.toLowerCase()),className:"block text-xl text-purple-800 hover:text-purple-600 transition-all duration-200 hover:translate-x-2",onClick:()=>a(!1),children:t})},t))})})})]})}},80264:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(57437);function s(e){let{contentName:t}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-180px)] text-center",children:[(0,n.jsxs)("h1",{className:"text-3xl font-bold text-purple-800 mb-4",children:["Loading ",t]}),(0,n.jsx)("p",{className:"text-xl text-purple-600",children:"Please wait while we fetch your data..."})]})}},48909:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(57437);function s(e){let{contentName:t}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-180px)] text-center max-w-2xl mx-auto space-y-8",children:[(0,n.jsxs)("h1",{className:"text-4xl md:text-5xl font-bold text-purple-800",children:["Welcome to ",t]}),(0,n.jsx)("p",{className:"text-xl md:text-2xl text-purple-600",children:"Please connect your wallet to view your positions."})]})}},55800:function(e,t,a){a.d(t,{Z:function(){return I}});var n=a(57437),s=a(2265),r=a(67872),l=a(68768),i=a(7261),o=a(39502),u=a(55925),d=e=>{let{name:t,handleAmountChange:a,asset:s,amount:r,price:l,userBalance:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{className:"block text-sm font-medium mb-1",children:t}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"number",value:r,onChange:a,className:"flex-grow border border-[#b8c0ff] rounded-l px-3 py-2 text-lg focus:outline-none focus:ring-2 focus:ring-[#c8b6ff]",placeholder:"0,00"}),(0,n.jsx)("span",{className:"bg-[#bbd0ff] px-3 py-2 rounded-r text-lg",children:s})]}),i?(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["Balance: ",(0,o.b)(i.value,i.decimals)," ",s]}):null,(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:["â‰ˆ $",(0,u.i$)(r,l)]})]})},c=e=>{let{address:t,isDisabled:a,isProcessing:s,handleAction:r,openConnectModal:l,buttonLabel:i}=e;return t?(0,n.jsx)("button",{className:"w-full py-3 rounded text-lg\n                    ".concat(a||s?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-[#c8b6ff] hover:bg-[#b8c0ff] text-white"),onClick:r,disabled:a||s,children:i}):(0,n.jsx)("button",{className:"w-full bg-[#c8b6ff] text-white py-3 rounded hover:bg-[#b8c0ff] text-lg",onClick:l,children:"Connect Wallet"})},p=a(27323),y=a(27526),m=a(97269),b=a(77750),f=(e,t)=>{let{data:a,refetch:n}=(0,p.u)({address:null==e?void 0:e.cTokenAddress,abi:b.yi,functionName:"balanceOfUnderlying",args:[t],watch:!0}),{writeContract:r,data:l,isLoading:i,isSuccess:u,isError:d,error:c}=(0,y.S)(),{isLoading:f,isSuccess:x}=(0,m.A)({hash:l,confirmations:1}),h=(0,s.useCallback)(async t=>{i||f||r({address:b.Oj,abi:b.lK,functionName:"deposit",args:[null==e?void 0:e.address,t]})},[null==e?void 0:e.address,r,i,f]);return(0,s.useEffect)(()=>{x&&n()},[x]),{handleWriteSupply:h,isSupplying:i||f,isSupplySuccess:x,isSupplyError:d,supplyError:c,userSupplied:a?Number((0,o.b)(a,(null==e?void 0:e.decimals)||18)):0}},x=a(17379),h=(e,t,a)=>{let{data:n}=(0,x.K)({address:t,token:null==e?void 0:e.address}),{data:r,refetch:l}=(0,p.u)({address:null==e?void 0:e.address,abi:b.em,functionName:"allowance",args:[t,b.Oj],watch:!0}),{writeContract:i,data:o,isLoading:u,isSuccess:d,isError:c,error:f}=(0,y.S)(),{isLoading:h,isSuccess:g}=(0,m.A)({hash:o,confirmations:1}),v=async t=>{let a={address:null==e?void 0:e.address,abi:b.em,functionName:"approve",args:[b.Oj,t]};await i(a)};return(0,s.useEffect)(()=>{(g||a)&&l()},[g,a]),{userBalance:n,userAllowance:r,handleWriteApproveSpending:v,isApproving:u||h,isApproveSuccess:d,isApproveError:c,approveError:f}},g=(e,t)=>{let{data:a}=(0,x.K)({address:t,watch:!0}),{data:n,refetch:r}=(0,p.u)({address:b.tG,abi:b.Kx,functionName:"balanceOf",args:[t],watch:!0}),{writeContract:l,data:i,isLoading:u,isSuccess:d,isError:c,error:f}=(0,y.S)(),{isLoading:h,isSuccess:g}=(0,m.A)({hash:i,confirmations:1}),v=async e=>{l({address:b.tG,abi:b.Kx,functionName:"deposit",value:e})},w=async e=>{l({address:b.tG,abi:b.Kx,functionName:"withdraw",args:[e]})};(0,s.useEffect)(()=>{g&&r()},[g]);let T=(null==e?void 0:e.address.toLowerCase())===b.tG;return{handleWrapEth:v,handleUnwrapEth:w,isProcessing:u||h,isSuccess:g,isError:c,wethError:f,wethBalance:n?Number((0,o.b)(n,18)):0,ethBalance:a?Number((0,o.b)(a.value,18)):0,isEthMarket:T}},v=e=>{let{title:t="Details",showCollateral:a=!1,details:s=[]}=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h4",{className:"font-medium text-lg text-[#c8b6ff]",children:t}),(0,n.jsx)("div",{className:"space-y-2 text-sm",children:s.map((e,t)=>(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:e.label}),(0,n.jsx)("span",{children:e.value})]},t))})]})},w=e=>{let{market:t,address:a,healthFactor:r,openConnectModal:o}=e,[p,y]=(0,s.useState)(!1),[m,b]=(0,s.useState)(!1),[x,w]=(0,s.useState)("0.00"),[T,j]=(0,s.useState)(!1),[N,A]=(0,s.useState)(!1),{handleWriteSupply:S,isSupplying:B,isSupplySuccess:k,isSupplyError:C,supplyError:M,userSupplied:E}=f(t,a),{userBalance:I,userAllowance:R,handleWriteApproveSpending:F,isApproving:V,isApproveSuccess:L,isApproveError:P,approveError:D}=h(t,a,k),{handleWrapEth:U,isProcessing:_,isSuccess:O,isError:q,wethError:$,wethBalance:W,isEthMarket:K,ethBalance:H}=g(t,a),Z=(0,s.useCallback)(async()=>{if(!a){null==o||o();return}if(!T){j(!0);try{let e=(0,l.v)(x,t.decimals);(0,u.qh)(e)&&(K&&m?await U(e):p&&e>R?await F(e):await S(e))}catch(e){i.Am.error("Transaction failed"),j(!1)}}},[a,x,t.decimals,m,p,R,U,F,S,T,o,K]);(0,s.useEffect)(()=>{O&&(i.Am.success("Successfully wrapped ETH to WETH!"),b(!1),j(!1)),q&&(i.Am.error("Error wrapping ETH: ".concat((null==$?void 0:$.message)||"Unknown error")),j(!1))},[O,q,$]),(0,s.useEffect)(()=>{if(L&&(i.Am.success("Successfully approved spending!"),y(!1),j(!1)),P){let e=(null==D?void 0:D.message.includes("User rejected the request"))?"User rejected the request.":"Error approving: ".concat(null==D?void 0:D.message);i.Am.error(e),j(!1)}},[L,P,D]),(0,s.useEffect)(()=>{if(k&&(i.Am.success("Supply successful!"),w("0.00"),j(!1)),C){let e=(null==M?void 0:M.message.includes("User rejected the request"))?"User rejected the request.":"Error supplying: ".concat(null==M?void 0:M.message);i.Am.error(e),j(!1)}},[k,C,M]);let G=[{label:"Current Supply",value:"".concat((0,u._I)(E||0)," ").concat(t.asset)},{label:"New Supply Amount",value:"".concat(x," ").concat(t.asset)},{label:"",value:"$".concat((0,u.i$)(x,t.price))},{label:"LTV",value:"".concat(t.ltv,"%")},{label:"Increase in Borrow Limit",value:"$".concat((0,u.i$)(x,t.price*t.ltv))},{label:"Supply APY",value:"".concat((null==t?void 0:t.supplyAPR)||0,"%")}];return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(d,{handleAmountChange:e=>{let a=e.target.value;if(/^\d*\.?\d{0,18}$/.test(a)&&a>=0){var n;w(a);let e=(0,l.v)(a,t.decimals);A(!!(n=parseFloat(a))&&!(n<=0)&&(K?n<=H||0n:n<=(null==I?void 0:I.value))),(0,u.qh)(R)&&(0,u.qh)(e)&&(y(e>R),b(K&&parseFloat(a)>0&&e>(null==I?void 0:I.value)))}},name:K?"Amount of ETH to wrap and supply":"Amount to deposit",asset:t.asset,amount:x,userBalance:I,price:t.price}),(0,n.jsx)(v,{showCollateral:!0,details:G}),(0,n.jsx)(c,{address:a,isDisabled:!N,isProcessing:T||B||_||V,openConnectModal:o,buttonLabel:K&&m?_?"Wrapping...":"Wrap ETH":p?V?"Approving...":"Approve":B?"Supplying...":"Supply",handleAction:Z}),(0,n.jsxs)("p",{children:["Current Allowance: ",null==R?void 0:R.toString()]})]})};function T(e,t,a,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"increase",r=parseFloat(e)||0,l=t.totalCollateralValue;return("increase"===s?l+=r*a*n:l-=r*a*n,l<0)?0:(0===t.totalBorrowedValue&&(t.totalBorrowedValue=1e-11),l/t.totalBorrowedValue)}function j(e){let{accountInfo:t,assetPrice:a,marketLiquidity:n}=e,s=(t.totalCollateralValue-t.totalBorrowedValue)/a;return(0,u._I)(Math.min(Math.max(0,s),n))}function N(e){let{amount:t,maxAmount:a}=e;return 0!==parseFloat(t)&&parseFloat(t)<=parseFloat(a)}var A=(e,t,a)=>{let[n,r]=(0,s.useState)(j({accountInfo:a,market:e})),[i,u]=(0,s.useState)(a),{writeContract:d,data:c,isLoading:f,isSuccess:x,isError:h,error:g}=(0,y.S)(),{isLoading:v,isSuccess:w}=(0,m.A)({hash:c,confirmations:1}),T=async t=>{let a=(0,l.v)(t,e.decimals);d({address:b.Oj,abi:b.lK,functionName:"borrow",args:[null==e?void 0:e.address,a]})},{data:N,refetch:A}=(0,p.u)({address:b.Oj,abi:b.lK,functionName:"getAccountInformation",args:[t],watch:!0}),{data:S,refetch:B}=(0,p.u)({address:e.cTokenAddress,abi:b.yi,functionName:"borrowBalanceCurrent",args:[t],watch:!0}),{data:k,refetch:C}=(0,p.u)({address:e.cTokenAddress,abi:b.yi,functionName:"totalSupply",args:[],watch:!0}),{data:M,refetch:E}=(0,p.u)({address:e.cTokenAddress,abi:b.yi,functionName:"totalBorrows",args:[],watch:!0});return(0,s.useEffect)(()=>{if(N){let t={totalCollateralValue:Number((0,o.b)(N[1],18)),totalBorrowedValue:Number((0,o.b)(N[0],18))};if(u(t),k){let a=(0,o.b)(k,e.decimals)*e.exchangeRate-(0,o.b)(M,e.decimals)-e.totalReserve;r(j({accountInfo:t,assetPrice:e.price,marketLiquidity:a}))}}},[N,k,M,e]),(0,s.useEffect)(()=>{w&&(A(),B(),C(),E())},[w]),{handleBorrow:T,isBorrowing:f||v,isBorrowSuccess:w,isBorrowError:h,borrowError:g,borrowLimit:n,userBorrowData:S?Number((0,o.b)(S,e.decimals)):0,updatedAccountInfo:i}},S=e=>{let{market:t,address:a,openConnectModal:r,accountInfo:l}=e,[o,u]=(0,s.useState)("0.00"),[p,y]=(0,s.useState)(!1),{handleBorrow:m,isBorrowing:b,isBorrowSuccess:f,isBorrowError:x,borrowError:h,borrowLimit:g,userBorrowData:w,updatedAccountInfo:j}=A(t,a,l),S=async()=>{if(!a){null==r||r();return}await m(o)};(0,s.useEffect)(()=>{if(f&&i.Am.success("Borrow successful!"),x){let e=(null==h?void 0:h.message.includes("User rejected the request"))?"User rejected the request.":"Error borrowing tokens: ".concat(null==h?void 0:h.message);i.Am.error("Error borrowing tokens: ".concat(e))}},[f,x,h]),(0,s.useEffect)(()=>{y(N({amount:o,maxAmount:g}))},[o,g]);let B=(0,s.useMemo)(()=>[{label:"Max to borrow",value:"".concat(g," ").concat(t.asset)},{label:"Borrow Limit",value:"$".concat(((g||0)*t.price).toFixed(2))},{label:"Amount Borrowed",value:"".concat(w.toFixed(6)," ").concat(t.asset)},{label:"",value:"$".concat((w*t.price).toFixed(2))},{label:"New Health Factor",value:T(o,j||l,t.price,t.ltv,"decrease").toFixed(2)},{label:"Borrow APY",value:"".concat(t.borrowAPR||0,"%")}],[o,j,l,g,w,t.asset,t.price,t.borrowAPR]);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(d,{handleAmountChange:e=>{let t=e.target.value;/^\d*\.?\d{0,18}$/.test(t)&&t>=0&&u(t)},name:"Amount to borrow",asset:t.asset,amount:o,price:t.price}),(0,n.jsx)(v,{details:B}),(0,n.jsx)(c,{address:a,isDisabled:!p,isProcessing:b,openConnectModal:r,buttonLabel:b?"Borrowing...":"Borrow",handleAction:S})]})},B=a(64707),k=(e,t)=>{let[a,n]=(0,s.useState)("0"),{data:r,refetch:l}=(0,p.u)({address:null==e?void 0:e.cTokenAddress,abi:b.yi,functionName:"borrowBalanceCurrent",args:[t],watch:!0}),{writeContract:i,data:u,isLoading:d,isSuccess:c,isError:f,error:x}=(0,y.S)(),{isLoading:h,isSuccess:g}=(0,m.A)({hash:u,confirmations:1}),v=async t=>{i({address:b.Oj,abi:b.lK,functionName:"repay",args:[null==e?void 0:e.address,t]})};return(0,s.useEffect)(()=>{g&&l()},[g,l]),(0,s.useEffect)(()=>{n((r?Number((0,o.b)(r,null==e?void 0:e.decimals)):0).toFixed(9))},[r]),{handleWriteRepay:v,isRepaying:d||h,isRepaySuccess:g,isRepayError:f,repayError:x,repayLimit:a}},C=e=>{let{market:t,address:a,openConnectModal:r,accountInfo:o}=e,[p,y]=(0,s.useState)(!1),[m,b]=(0,s.useState)(!1),[f,x]=(0,s.useState)("0.00"),{handleWriteRepay:g,isRepaying:w,isRepaySuccess:T,isRepayError:j,repayError:A,repayLimit:S}=k(t,a),{userBalance:B,userAllowance:C,handleWriteApproveSpending:M,isApproving:E,isApproveSuccess:I,isApproveError:R,approveError:F}=h(t,a,T),V=async()=>{if(!a){null==r||r();return}let e=(0,l.v)(f,t.decimals);if((0,u.qh)(C)&&(0,u.qh)(e)){if(e>C)await M(e);else try{await g(e)}catch(e){i.Am.error("Repay transaction failed")}}};(0,s.useEffect)(()=>{if(I&&(i.Am.success("Successfully approved spending!"),y(!1)),R){let e=(null==F?void 0:F.message.includes("User rejected the request"))?"User rejected the request.":"Error supplying tokens: ".concat(null==F?void 0:F.message);i.Am.error("Error approving spending: ".concat(e))}},[I,R,F]),(0,s.useEffect)(()=>{if(T&&(i.Am.success("Repay successful!"),x("0.00")),j){let e=(null==A?void 0:A.message.includes("User rejected the request"))?"User rejected the request.":"Error repaying tokens: ".concat(null==A?void 0:A.message);i.Am.error(e)}},[T,j,A]);let L=[{label:"Available to Repay",value:"".concat(S," ").concat(t.asset)},{label:"",value:"$".concat(((S||0)*t.price).toFixed(2))},{label:"Remaining Debt After Repayment",value:"".concat(Math.max(0,((null==t?void 0:t.totalBorrows)||0)-parseFloat(f))," ").concat(t.asset)},{label:"",value:"$".concat((Math.max(0,((null==t?void 0:t.totalBorrows)||0)-parseFloat(f))*t.price).toFixed(2))},{label:"Borrow APY",value:"".concat((null==t?void 0:t.borrowAPR)||0,"%")}];return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(d,{handleAmountChange:e=>{let a=e.target.value;if(/^\d*\.?\d{0,18}$/.test(a)&&a>=0){x(a);let n=(0,l.v)(e.target.value,t.decimals);(0,u.qh)(C)&&(0,u.qh)(n)&&y(n>C),b(N({amount:a,maxAmount:S}))}},name:"Amount to repay",asset:t.asset,amount:f,userBalance:B,price:t.price}),(0,n.jsx)(v,{details:L}),(0,n.jsx)(c,{address:a,isDisabled:!m,isProcessing:w,openConnectModal:r,buttonLabel:p?"Approve":E?"Approving...":w?"Repay...":"Repay",handleAction:V}),(0,n.jsxs)("p",{children:["Current Allowance: ",null==C?void 0:C.toString()]})]})},M=(e,t)=>{let[a,n]=(0,s.useState)(0),{data:r,refetch:l}=(0,p.u)({address:null==e?void 0:e.cTokenAddress,abi:b.yi,functionName:"balanceOfUnderlying",args:[t],watch:!0}),{data:i,refetch:u}=(0,p.u)({address:b.Oj,abi:b.lK,functionName:"getAccountInformation",args:[t],watch:!0}),{writeContract:d,data:c,isLoading:f,isSuccess:x,isError:h,error:g}=(0,y.S)(),{isLoading:v,isSuccess:w}=(0,m.A)({hash:c,confirmations:1}),T=async t=>{d({address:b.Oj,abi:b.lK,functionName:"withdraw",args:[null==e?void 0:e.address,t]})};return(0,s.useEffect)(()=>{w&&(l(),u())},[w,u,l]),(0,s.useEffect)(()=>{i&&n(function(e){let{accountInfo:t,market:a,userSupplied:n}=e;return t.totalBorrowedValue<.01?n:Math.min(Math.max(0,(t.totalCollateralValue-t.totalBorrowedValue)/a.price),n)}({accountInfo:{totalCollateralValue:Number((0,o.b)(i[1],18)),totalBorrowedValue:Number((0,o.b)(i[0],18))},market:e,userSupplied:r?Number((0,o.b)(r,e.decimals)):0}))},[i,e,r]),{handleWithdraw:T,isWithdrawing:f||v,isWithdrawSuccess:x,isWithdrawError:h,withdrawError:g,userSupplied:r?Number((0,o.b)(r,e.decimals)):0,maxWithdrawableAmount:a}},E=e=>{let{market:t,address:a,openConnectModal:r,accountInfo:o}=e,[p,y]=(0,s.useState)("0.0"),[m,b]=(0,s.useState)(!1),{handleWithdraw:f,isWithdrawing:x,isWithdrawSuccess:h,isWithdrawError:g,withdrawError:w,userSupplied:j,maxWithdrawableAmount:A}=M(t,a),S=async()=>{if(!a){null==r||r();return}let e=(0,l.v)(p,t.decimals);await f(e)};(0,s.useEffect)(()=>{if(h&&i.Am.success("Withdraw successful!"),g){let e=(null==w?void 0:w.message.includes("User rejected the request"))?"User rejected the request.":"Error withdrawing tokens: ".concat(null==w?void 0:w.message);i.Am.error("Error withdrawing tokens: ".concat(e))}},[h,g,w]),(0,s.useEffect)(()=>{b(N({amount:p,maxAmount:A}))},[p,A]);let B=(0,s.useMemo)(()=>[{label:"Available to Withdraw",value:"".concat((0,u._I)(A)," ").concat(t.asset)},{label:"",value:"$".concat((0,u.i$)(A,t.price))},{label:"Current Supply Balance",value:"".concat((0,u._I)(j||0)," ").concat(t.asset)},{label:"",value:"$".concat((0,u.i$)(j||0,t.price))},{label:"New Health Factor",value:T(p,o,t.price,t.ltv,"decrease").toFixed(2)},{label:"Remaining Supply After Withdrawal",value:"".concat((0,u._I)(Math.max(0,(j||0)-parseFloat(p)))," ").concat(t.asset)},{label:"",value:"$".concat((0,u.i$)(Math.max(0,(j||0)-parseFloat(p)),t.price))},{label:"Supply APY",value:"".concat((null==t?void 0:t.supplyAPR)||0,"%")}],[p,j,t.asset,t.price,t.supplyAPR,A,o,t]);return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(d,{handleAmountChange:e=>{let t=e.target.value;/^\d*\.?\d{0,18}$/.test(t)&&t>=0&&y(t)},name:"Amount to withdraw",asset:t.asset,amount:p,price:t.price,maxAmount:A}),(0,n.jsx)(v,{details:B}),(0,n.jsx)(c,{address:a,isDisabled:!m,isProcessing:x,openConnectModal:r,buttonLabel:x?"Withdrawing...":"Withdraw",handleAction:S})]})},I=e=>{let{isOpen:t,onClose:a,market:l,healthFactor:i,activeTabName:o="supply",accountInfo:u}=e,[d,c]=(0,s.useState)(o),{address:p}=(0,B.m)(),{openConnectModal:y}=(0,r.We)();return((0,s.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t&&l)?(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 w-[515px]",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("div",{className:"flex justify-between border-b border-[#e7c6ff]",children:[(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{className:"py-2 px-4 text-lg ".concat("supply"===d?"border-b-2 border-[#c8b6ff] text-[#c8b6ff]":"text-gray-600"),onClick:()=>c("supply"),children:"Supply"}),(0,n.jsx)("button",{className:"py-2 px-4 text-lg ".concat("borrow"===d?"border-b-2 border-[#c8b6ff] text-[#c8b6ff]":"text-gray-600"),onClick:()=>c("borrow"),children:"Borrow"}),(0,n.jsx)("button",{className:"py-2 px-4 text-lg ".concat("repay"===d?"border-b-2 border-[#c8b6ff] text-[#c8b6ff]":"text-gray-600"),onClick:()=>c("repay"),children:"Repay"}),(0,n.jsx)("button",{className:"py-2 px-4 text-lg ".concat("withdraw"===d?"border-b-2 border-[#c8b6ff] text-[#c8b6ff]":"text-gray-600"),onClick:()=>c("withdraw"),children:"Withdraw"})]}),(0,n.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-2xl px-4",children:"\xd7"})]})}),"supply"===d&&(0,n.jsx)(w,{market:l,address:p,healthFactor:i,openConnectModal:y}),"borrow"===d&&(0,n.jsx)(S,{market:l,address:p,openConnectModal:y,accountInfo:u}),"repay"===d&&(0,n.jsx)(C,{market:l,address:p,openConnectModal:y,accountInfo:u}),"withdraw"===d&&(0,n.jsx)(E,{market:l,address:p,openConnectModal:y,accountInfo:u})]})}):null}},77750:function(e,t,a){a.d(t,{FORMAT_CONSTANTS:function(){return r},Kx:function(){return d},Oj:function(){return n},_s:function(){return l},em:function(){return i},lK:function(){return o},tG:function(){return s},yi:function(){return u}});let n="0xbcFEC612270033B71d878de94f94F46C55B5b48A",s="0x4200000000000000000000000000000000000006",r={ITEMS_PER_MARKET:10,PRICE_DECIMALS:18,HEALTH_FACTOR_DECIMALS:10,DEFAULT_DECIMALS:18,DEFAULT_PRECISION:2},l=[{asset:"WETH",address:"0x4200000000000000000000000000000000000006",decimals:18,ltv:.75,cTokenAddress:"0x38e3176f78E4adF44795Cade3B3f93041Cc55434",baseRate:.03,reserveFactor:.1,price:2e3,totalSupplyUnderlying:0,totalBorrows:0,totalSupply:0,exchangeRate:0,multiplier:.05},{asset:"LINK",address:"0xE4aB69C077896252FAFBD49EFD26B5D171A32410",ltv:.75,decimals:18,cTokenAddress:"0xb242d5b5F092dAe8Dba26744aca4450de4fd89df",baseRate:.02,reserveFactor:.1,price:17,totalCollateral:0,totalBorrows:0,totalSupply:0,exchangeRate:0,multiplier:.05},{asset:"USDC",address:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",ltv:.75,decimals:6,cTokenAddress:"0x579D74Bb73F6301B88cE6cB18aA4bC8Fb0765c6E",baseRate:.04,reserveFactor:.1,price:1,totalCollateral:0,totalBorrows:0,totalSupply:0,exchangeRate:0,multiplier:.05}],i=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"}],o=[{inputs:[{internalType:"address",name:"user",type:"address"}],name:"healthFactor",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"getUSDValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"s_tokenToCToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract ISwapRouter",name:"_swapRouter",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"amount",type:"uint256"}],name:"Borrow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"repayToken",type:"address"},{indexed:!0,internalType:"address",name:"rewardToken",type:"address"},{indexed:!1,internalType:"address",name:"liquidator",type:"address"}],name:"Liquidate",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"amount",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"amount",type:"uint256"}],name:"Repay",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!0,internalType:"uint256",name:"amount",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"cTokenAmount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"repayToken",type:"address"},{internalType:"address",name:"rewardToken",type:"address"}],name:"liquidate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getAccountInformation",outputs:[{internalType:"uint256",name:"borrowedValueInUSD",type:"uint256"},{internalType:"uint256",name:"collateralValueInUSD",type:"uint256"}],stateMutability:"view",type:"function"}],u=[{inputs:[{internalType:"address",name:"user",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalBorrows",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"exchangeRateStored",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getBorrowAPR",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSupplyAPR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"cash",type:"uint256"},{internalType:"uint256",name:"borrows",type:"uint256"},{internalType:"uint256",name:"reserves",type:"uint256"}],name:"getBorrowRate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOfUnderlying",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"borrowBalanceCurrent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTotalReserves",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],d=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"src",type:"address"},{indexed:!0,internalType:"address",name:"guy",type:"address"},{indexed:!1,internalType:"uint256",name:"wad",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"dst",type:"address"},{indexed:!1,internalType:"uint256",name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"src",type:"address"},{indexed:!0,internalType:"address",name:"dst",type:"address"},{indexed:!1,internalType:"uint256",name:"wad",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"src",type:"address"},{indexed:!1,internalType:"uint256",name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"},{payable:!0,stateMutability:"payable",type:"fallback"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"guy",type:"address"},{internalType:"uint256",name:"wad",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"deposit",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"wad",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"src",type:"address"},{internalType:"address",name:"dst",type:"address"},{internalType:"uint256",name:"wad",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"wad",type:"uint256"}],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}]},50210:function(e,t,a){a.d(t,{Z:function(){return y}});var n=a(16986),s=a(2265),r=a(77750);let l=function(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{address:e,abi:t,functionName:a,args:n}},i=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return l(e,r.yi,t,a)},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return l(r.Oj,r.lK,e,t)},u=["totalSupply","totalBorrows","exchangeRateStored","getSupplyAPR","getTotalReserves","getBorrowAPR"],d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r._s;return{marketData:t.map(t=>({cTokenData:u.map(e=>i(t.cTokenAddress,e)),usdValue:o("getUSDValue",[t.address,BigInt(10)**BigInt(t.decimals)]),cTokenAddress:o("s_tokenToCToken",[t.address]),userSupply:i(t.cTokenAddress,"balanceOfUnderlying",[e]),userBorrow:i(t.cTokenAddress,"borrowBalanceCurrent",[e])})),accountInfo:o("getAccountInformation",[e]),healthFactor:o("healthFactor",[e]),userRewards:o("getUserRewards",[e])}},c=e=>[...e.marketData.flatMap(e=>[...e.cTokenData,e.usdValue,e.cTokenAddress,e.userSupply,e.userBorrow]),e.accountInfo,e.healthFactor,e.userRewards];var p=a(31930),y=(e,t)=>{let[a,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),[o,u]=(0,s.useState)(null),y=p.MR.isTestMode,{flattenedCalls:m}=(0,s.useMemo)(()=>({flattenedCalls:!y&&e?c(d(e)):[]}),[e,y]),{data:b,isError:f,refetch:x}=(0,n.N)({contracts:m,watch:!0,enabled:!y&&!!e}),h=(0,s.useCallback)(async()=>{if(e){i(!0);try{y?u(t(p.EN)):await x()}catch(e){console.error("Error refreshing data:",e),r(!0)}finally{i(!1)}}},[e,x,y,t]);return(0,s.useEffect)(()=>{if(y){u(t(p.EN)),i(!1),r(!1);return}!b&&e?i(!0):b&&(u(t(b)),i(!1)),r(f)},[e,b,f,t,y]),{isError:a,isLoading:l,processedData:o,refresh:h}}},52853:function(e,t,a){a.d(t,{Z:function(){return s}});var n=a(2265);function s(){let[e,t]=(0,n.useState)({isOpen:!1,activeTab:"",selectedMarket:null});return{modalState:e,openModal:(e,a)=>{t({isOpen:!0,activeTab:a,selectedMarket:e})},closeModal:()=>{t({isOpen:!1,activeTab:"",selectedMarket:null})}}}},31930:function(e,t,a){function n(){return"true"===localStorage.getItem("isTestMode")}function s(e){localStorage.setItem("isTestMode",e.toString()),window.location.reload()}a.d(t,{EN:function(){return l},MR:function(){return r},PY:function(){return s},RI:function(){return n}});let r={get isTestMode(){return n()}},l=[{result:BigInt("100000000000000000000")},{result:BigInt("50000000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("300000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("450000000000000000")},{result:BigInt("200000000000")},{result:"0x11daF26e5Ac90eA5fE8Cbc50A1c1418B4F01a970"},{result:BigInt("50000000000000000000")},{result:BigInt("20000000000000000000")},{result:BigInt("1000000000000000000000")},{result:BigInt("500000000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("250000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("400000000000000000")},{result:BigInt("1700000000")},{result:"0x6cC4983A79A45e74Ad31cb8326C44eEA628E7a35"},{result:BigInt("300000000000000000000")},{result:BigInt("100000000000000000000")},{result:BigInt("1000000000000000000000")},{result:BigInt("500000000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("200000000000000000")},{result:BigInt("1000000000000000000")},{result:BigInt("350000000000000000")},{result:BigInt("100000000")},{result:"0x6cC49"},{result:BigInt("400000000000000000000")},{result:BigInt("150000000000000000000")},{result:[BigInt("90000000000000000000"),BigInt("2000000000000000000000")]},{result:BigInt("150000000")},{result:BigInt("50000000000000000000")}]},55925:function(e,t,a){a.d(t,{M6:function(){return x},_I:function(){return y},i$:function(){return m},jN:function(){return h},qh:function(){return d}});var n=a(39502),s=a(77750);let{ITEMS_PER_MARKET:r,PRICE_DECIMALS:l,HEALTH_FACTOR_DECIMALS:i,DEFAULT_DECIMALS:o,DEFAULT_PRECISION:u}=s.FORMAT_CONSTANTS;function d(e){return"bigint"==typeof e}function c(e,t){return Number((0,n.b)(e||BigInt(0),t))}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;return null==e?"0.00":Number((0,n.b)(e,t)).toFixed(a)}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9,a=Number(e);return isNaN(a)?"0":a.toFixed(t).replace(/\.?0+$/,"")||"0"}function m(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=parseFloat(e),s=parseFloat(t);return isNaN(n)||isNaN(s)?"0.00":(n*s).toFixed(a)}function b(e,t,a){let n=function(e,t,a){var n,s,i,o,u,d,y,m,b,f;let x=a*r;return{...t,totalSupply:p(null===(n=e[x])||void 0===n?void 0:n.result,t.decimals,5),totalBorrows:Number(p(null===(s=e[x+1])||void 0===s?void 0:s.result,t.decimals,5)),totalReserve:p(null===(i=e[x+4])||void 0===i?void 0:i.result,t.decimals,5),supplyAPR:p(null===(o=e[x+3])||void 0===o?void 0:o.result,16),borrowAPR:p(null===(u=e[x+5])||void 0===u?void 0:u.result,16),exchangeRate:Number(p(null===(d=e[x+2])||void 0===d?void 0:d.result)),price:Number(p(null===(y=e[x+6])||void 0===y?void 0:y.result,l)),cTokenAddress:null===(m=e[x+7])||void 0===m?void 0:m.result,userSupplied:c(null===(b=e[x+8])||void 0===b?void 0:b.result,t.decimals),userBorrowed:c(null===(f=e[x+9])||void 0===f?void 0:f.result,t.decimals)}}(t,e,a);n.totalSupplyUnderlying=Number(n.totalSupply)*n.exchangeRate,n.availableLiquidity=n.totalSupplyUnderlying-n.totalBorrows-Number(n.totalReserve);let s={suppliedValue:n.totalSupplyUnderlying*n.price,borrowedValue:n.totalBorrows*n.price,reservedValue:Number(n.totalReserve)*n.price};return{market:n,values:s}}function f(e){var t;return Number((0,n.b)((null===(t=e[e.length-2])||void 0===t?void 0:t.result)||BigInt(0),i))}function x(e){if(!e)return{updatedMarkets:[],healthFactor:0,marketsOverView:{allSuppliedAssetsValue:0,allBorrowedAssetsValue:0,allReservedAssetsValue:0,marketsSize:0},accountInfo:{totalCollateralValue:0,totalBorrowedValue:0,totalUserRewards:0}};let t=0,a=0,n=0,r=s._s.map((s,r)=>{let{market:l,values:i}=b(s,e,r);return t+=i.suppliedValue,a+=i.borrowedValue,n+=i.reservedValue,l}),l={allSuppliedAssetsValue:t,allBorrowedAssetsValue:a,allReservedAssetsValue:n,marketsSize:t+a};return{updatedMarkets:r,healthFactor:f(e),marketsOverView:l,accountInfo:function(e){var t,a;let n=(null===(t=e[e.length-3])||void 0===t?void 0:t.result)||[BigInt(0),BigInt(0)];return{totalCollateralValue:c(n[1],18),totalBorrowedValue:c(n[0],18),totalUserRewards:c(null===(a=e[e.length-1])||void 0===a?void 0:a.result,18)}}(e)}}function h(e){if(!e)return{userPositions:{},overallPosition:{supplied:0,borrowed:0,availableToBorrow:0,healthFactor:0,totalRewards:0},marketsData:{},accountInfo:{totalCollateralValue:0,totalBorrowedValue:0}};let t={},a={},n=0,r=0;s._s.forEach((s,l)=>{let{market:i,values:o}=b(s,e,l),u=i.price;n+=i.userSupplied*u,r+=i.userBorrowed*u,(i.userBorrowed||i.userSupplied)&&(t[i.asset]={supplied:i.userSupplied,borrowed:i.userBorrowed,price:u,supplyAPR:i.supplyAPR,borrowAPR:i.borrowAPR}),a[i.asset]={...i,price:u}});let l={totalCollateralValue:c(e[e.length-3].result[1],18),totalBorrowedValue:c(e[e.length-3].result[0],18)},i=f(e),o=l.totalCollateralValue-l.totalBorrowedValue,u=c(e[e.length-1].result,18);return{userPositions:t,overallPosition:{supplied:n,borrowed:r,availableToBorrow:o,totalRewards:u,healthFactor:i},marketsData:a,accountInfo:l}}}}]);